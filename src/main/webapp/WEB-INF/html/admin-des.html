<#assign base=request.contextPath />
<#import "spring.ftl" as spring/>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <base id="base" href="${base}">
    <title>后台列表</title>
    <link rel="stylesheet" id="thickbox-css" href="${base}/css/admin.css" type="text/css"/>
    <link rel="stylesheet" id="olida-bootstrap-css" href="${base}/css/bootstrap.css?ver=4.7.7" type="text/css" media="all"/>
</head>
<body>
<div class="des">
    <div class="list-main">
        <a href="${base}/index">未来设计</a>
        <a class="active" href="${base}/admin-list">作品列表</a>
    </div>
</div>
<div class="des-main">
    <div class="main-list">
        <p class="title">作品列表>添加作品</p>
        <div class="list-top clearfix">
            <p class="one clearfix">
                <span class="first">请选择作品类别（单选）：</span>
                <span data-id="1" class="active">城市形象</span>
                <span data-id="2">品牌策划</span>
                <span data-id="3">品牌平面视觉</span>
                <span data-id="4">品牌互联网视觉</span>
                <span data-id="5">品牌空间视觉</span>
            </p>
            <p class="two">请选择作品标签（最多三个）：</p>
            <p  data-id="1" class="three-1 tubi-none clearfix">
                <span class="first">城市形象</span>
                <span>景观</span>
                <span>公共艺术</span>
                <span>建筑</span>
                <span>民居</span>
                <span>特色小镇</span>
            </p>
            <p  data-id="2" class="three-2 tubi-none display-none clearfix">
                <span class="first">品牌策划</span>
                <span>市场调查</span>
                <span>消费者研究</span>
                <span>品牌定位</span>
                <span>品牌命名</span>
            </p>
            <p  data-id="3" class="three-3 tubi-none display-none clearfix">
                <span class="first">品牌平面视觉</span>
                <span>logo设计</span>
                <span>VI系统</span>
                <span>产品包装</span>
                <span>海报</span>
                <span>书册</span>
            </p>
            <p  data-id="4" class="three-4 tubi-none display-none clearfix">
                <span class="first">品牌互联网视觉</span>
                <span>网站</span>
                <span>APP</span>
                <span>H5</span>
            </p>
            <p  data-id="5" class="three-5 tubi-none display-none clearfix">
                <span class="first">品牌空间视觉</span>
                <span>主题空间</span>
                <span>导视</span>
                <span>空间装置</span>
            </p>
        </div>
        <div class="list-middle">
            <p class="furo clearfix">
                <span class="color">作品标题</span>
                <span class="input-1">
                    <input type="text" name="zh_title" id="zh_title">
                    <span>中文</span>
                </span>
                <span class="input-2">
                    <input type="text" name="en_title" id="en_title">
                    <span>英文</span>
                </span>
            </p>
            <p class="furo clearfix">
                <span  class="color">作品描述</span>
                <span class="input-1">
                    <textarea rows="8" name="zh_descript" id="zh_descript"></textarea>
                    <span>中文</span>
                </span>
                <span class="input-2">
                    <textarea rows="8" name="en_descript" id="en_descript"></textarea>
                    <span>英文</span>
                </span>
            </p>
            <div class="photo clearfix">
                <div class="photo-left">
                    <p class="tubi-p">
                        <span class="color">作品封面</span>
                        <span>（支持jpg、png格式，封面显示尺寸为4：3比例）</span>
                    </p>
                    <a href="javascript:;" class="a-upload-1">
                        <input type="file" name="file" id="file1" onchange="imgUpload()">
                        <input type="hidden" id="img" value="">
                        <img src="${base}/images/icon-jia.png">
                    </a>
                </div>
                <div class="photo-right">
                    <p class="tubi-p">
                        <span  class="color">作品封面</span>
                        <span>（支持jpg、png格式，封面显示尺寸为4：3比例）</span>
                    </p>
                    <a href="javascript:;" class="a-upload-1">
                        <input type="file" name="file" id="file2" onchange="picUpload()">
                        <input type="hidden" id="pic" value="">
                        <img src="${base}/images/icon-jia.png">
                    </a>
                </div>
            </div>
            <p class="photo-sctp">
                <span class="color">上传作品图片</span>
                <span>支持jpg、png、gif、mp4格式</span>
            </p>
            <p>
                <a href="javascript:;" class="a-upload">
                    <input type="file" name="file" id="file3" onchange="imgsUpload()">点击这里上传文件
                    <input type="hidden" id="imgs" value="">
                </a>
            </p>
            <div class="bottom-image clearfix">
                <div class="image-li">
                    <img src="${base}/images/2.jpg">
                    <p>删除</p>
                </div>
                <div class="image-li">
                    <img src="${base}/images/2.jpg">
                    <p>删除</p>
                </div>
                <div class="image-li">
                    <img src="${base}/images/2.jpg">
                    <p>删除</p>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="bottom-main">
    <div class="main-bottom">
        <p class="">
            <span class="p-left">设置为首页作品</span>
            <label class="tu"><input type="checkbox" name="isHomePage" id="isHomePage">是</label>
          <!-- <label><input type="radio" name="radio">否</label>- -->
            <span class="p-wz">放置位置</span>
            <select name="num" id="num">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
            </select>
            <span class="p-wz">作品维度</span>
            <select name="dimension" id="dimension">
                <option value="2">2</option>
                <option value="3">3</option>
            </select>
        </p>
    </div>
</div>
<div class="bottom-bottom">
    <div class="bottom-a clearfix">
        <a href="javascript:;">确定</a>
    </div>
</div>
<script type="text/javascript" src="${base}/js/jquery-1.9.1.min.js"></script>
<!--<script type="text/javascript" src="${base}/js/index.js"></script>-->
<script type="text/javascript" src="${base}/js/jquery.ajaxfileupload.js"></script>
<script type="text/javascript">
    /**
     * Created by maker on 2016/11/5.
     */
    var zh_type = "",labels = [];
    $(function () {
        $(".li-in").hover(function(){
            $(this).find(".tubi").stop().toggle(500)
        })
        $(".tubi-ul li").bind("click", function () {
            var data_id = $(this).attr("data-id");
            $(".tubi-ul li").removeClass('active');
            $(".tubi-ul li[data-id = '"+data_id+"']").addClass('active');
            $(".main-list").addClass('display-none');
            $(".main-list[data-id = '"+data_id+"']").removeClass('display-none');
        });
        $(".des-main .main-list .list-top p.one span").bind("click", function () {
            var data_id = $(this).attr("data-id");
            $(".des-main .main-list .list-top p.one span").removeClass('active');
            $(".des-main .main-list .list-top p.one span[data-id = '"+data_id+"']").addClass('active');
            zh_type = $(".des-main .main-list .list-top p.one span[data-id = '"+data_id+"']").html();
            $(".tubi-none").addClass('display-none');
            $(".tubi-none[data-id = '"+data_id+"']").removeClass('display-none');
            $(".tubi-none span").removeClass("active")
        });
        $(".tubi-none span").bind("click", function () {
            if($(this).hasClass("active")){
                $(this).removeClass("active")
                labels.splice($.inArray($(this).text(),labels),1);
                alert(labels)
            }else{
                if($(".tubi-none").find(".active").length < 3){
                    $(this).addClass("active")
                    labels.push($(this).text());
                    alert($(this).text())
                    alert(labels)
                }else{
                    alert("最多选择3个")
                }
            }
        });
    });

    function imgUpload() {
        $.ajaxFileUpload
        (
            {
                url: '/demo/imgUpload', //用于文件上传的服务器端请求地址
                secureuri: false, //是否需要安全协议，一般设置为false
                fileElementId: 'img', //文件上传域的ID
                dataType: 'json', //返回值类型 一般设置为json
                success: function (data, status)  //服务器成功响应处理函数
                {
                    console.log(data)
                    $("#img").val(data)
                    alert("图片上传成功")
                },
                error: function (data, status, e)//服务器响应失败处理函数
                {
                    alert(e);
                }
            }
        )
        return false;
    }
    function picUpload() {
        $.ajaxFileUpload
        (
            {
                url: '/demo/imgUpload', //用于文件上传的服务器端请求地址
                secureuri: false, //是否需要安全协议，一般设置为false
                fileElementId: 'pic', //文件上传域的ID
                dataType: 'json', //返回值类型 一般设置为json
                success: function (data, status)  //服务器成功响应处理函数
                {
                    console.log(data)
                    $("#pic").val(data)
                    alert("图片上传成功")
                },
                error: function (data, status, e)//服务器响应失败处理函数
                {
                    alert(e);
                }
            }
        )
        return false;
    }
    function imgsUpload() {
        $.ajaxFileUpload
        (
            {
                url: '/demo/imgUpload', //用于文件上传的服务器端请求地址
                secureuri: false, //是否需要安全协议，一般设置为false
                fileElementId: 'imgs', //文件上传域的ID
                dataType: 'json', //返回值类型 一般设置为json
                success: function (data, status)  //服务器成功响应处理函数
                {
                    $("#imgs").val($("#imgs").val()+"_"+data);
                    console.log(data)
                    alert("图片上传成功")
                },
                error: function (data, status, e)//服务器响应失败处理函数
                {
                    alert(e);
                }
            }
        )
        return false;
    }

    function add() {
        var productImgs = new Array();
        productImgs = $("imgs").split("_");

        var en_type,type;
        if(zh_type=="城市形象"){
            en_type = "City Image";
            type = 1;
        }else if(zh_type=="品牌策划"){
            en_type = "Brand planning";
            type = 2;
        }else if(zh_type=="品牌平面视觉"){
            en_type = "Brand Graphic vision";
            type = 3;
        }else if(zh_type=="品牌互联网视觉"){
            en_type = "Brand internet vision";
            type = 4;
        }else if(zh_type=="品牌空间视觉"){
            en_type = "Brand space vision";
            type = 5;
        }
        var zh_label1 = "",en_label1 = "",zh_label2="",en_label2 = "",zh_label3="",en_label3="";
        $.each(labels,function(index,label){
            if(index==0){
                zh_label1 = label;
               en_label1 = zhToEnLlabel(label);
            }else if(index==1){
                zh_label2 = label;
                en_label2 = zhToEnLlabel(label);
            }else if(index=3){
                zh_label3 = label
                en_label3 = zhToEnLlabel(label);
            }
        });
        $.ajax({
            type : "POST",
            url : "/dream/add",
            dataType : "json",
            data : {
                en_title : $("#en_title").val(),     //英文标题
                zh_title : $("#zh_title").val(),     //中文标题
                type : type,           //分类，一次定义为1,2,3,4,5
                en_type : en_type,       //分类中文名称
                zh_type : zh_type,       //分类英文名称
                en_label1 : en_label1,     //英文标签1
                zh_label1 : zh_label1,      //中文标签1
                en_label2 : en_label2,
                zh_label2 : zh_label2,
                en_label3 : en_label3,
                zh_label3 : zh_label3,
                en_descript : $("#en_descript").val(),      //英文表述
                zh_descript : $("#zh_descript").val(),      //中文描述
                imgUrl : $("#img").val(),           //封面图片地址
                picImg : $("#pic").val(),
                dimension : $("#dimension").val(),         //2维作品或者3维作品，值为2或3
                isHomePage : $("#isHomePage")[0].checked?1:0,        //是否显示在首页1是，0否
                num : $("#num").val(),                //如果显示在首页填1-11数字，代表首页的位置，否则填0
                productImgs : productImgs
            },
            success : function(data) {
                console.log(data)
                $("#result").empty();
                //   $("#result").html(data)
                $("#result").text(JSON.stringify(data))
            }
        });
    }

    function zhToEnLlabel(label) {
        if(label=="景观/公共艺术"){
            return "Landscape / Public Art";
        }else if(label=="建筑/民宿"){
            return "Building / hostel";
        }else if(label=="特色小镇研究"){
            return "Research on Characteristic Towns";
        }else if(label=="市场调查"){
            return "market research";
        }else if(label=="消费者研究"){
            return "label";
        }else if(label=="品牌定位"){
            return "label";
        }else if(label=="品牌命名"){
            return "label";
        }else if(label=="logo设计"){
            return "Logo design";
        }else if(label=="VI系统"){
            return "VI design";
        }else if(label=="产品包装"){
            return "Product packaging";
        }else if(label=="海报"){
            return "poster";
        }else if(label=="书册"){
            return "Picture album";
        }else if(label=="网站"){
            return "Website design";
        }else if(label=="APP"){
            return "APP design";
        }else if(label=="小程序设计"){
            return "Small program design";
        }else if(label=="H5"){
            return "H5 scene application";
        }else if(label=="主题空间"){
            return "label";
        }else if(label=="导视"){
            return "label";
        }else if(label=="空间装置"){
            return "label";
        }

    }

</script>
</body>
</html>